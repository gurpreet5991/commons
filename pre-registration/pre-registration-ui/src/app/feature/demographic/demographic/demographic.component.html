<div *ngIf="secondaryLanguagelabels">
  <div class="wrapper">
    <div class="user">
      <header>{{ 'demographic.title' | translate }}</header>
      <hr />
      <div [dir]="textDir" class="user__container">
        <form [formGroup]="userForm" class="user__form">
          <h4>{{ 'demographic.language' | translate }}</h4>

          <mat-form-field>
            <input
              matInput
              #fullName
              [matKeyboard]="keyboardLang"
              maxlength="
                50"
              placeholder="{{ 'demographic.label_name' | translate }}"
              [formControlName]="formControlNames.fullName"
              (focusout)="onTransliteration(fullName, formControlNames.fullNameSecondary)"
              (change)="onTransliteration(fullName, formControlNames.fullNameSecondary)"
            />
            <mat-hint align="end">{{ fullName.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!fullName.invalid"> {{ 'demographic.validation.name_required' | translate }} </mat-error>
          </mat-form-field>

          <div class="user__age-or-date">
            <div class="user__date">
              <mat-form-field>
                <input
                  [readonly]="isReadOnly"
                  matInput
                  placeholder="{{ 'demographic.date_dd' | translate }}"
                  #dd
                  [formControlName]="formControlNames.date"
                  (focusout)="onDOBChange()"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  [readonly]="isReadOnly"
                  matInput
                  placeholder="{{ 'demographic.date_mm' | translate }}"
                  #mm
                  [formControlName]="formControlNames.month"
                  (focusout)="onDOBChange()"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  [readonly]="isReadOnly"
                  matInput
                  placeholder="{{ 'demographic.date_yyyy' | translate }}"
                  #yyyy
                  [formControlName]="formControlNames.year"
                  (focusout)="onDOBChange()"
                />
              </mat-form-field>
            </div>

            <div class="user__pref">
              <mat-slide-toggle (change)="onPreferenceChange($event)"></mat-slide-toggle>
            </div>
            <div class="user__age">
              <mat-form-field>
                <input
                  [readonly]="!isReadOnly"
                  matInput
                  tabindex="-1"
                  [formControlName]="formControlNames.age"
                  placeholder="{{ 'demographic.label_age' | translate }}"
                  #age
                  (focusout)="onAgeChange()"
                />
              </mat-form-field>
              <span>{{ 'demographic.text_years' | translate }}</span>
            </div>
          </div>

          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="!userForm.get(formControlNames.date).valid && userForm.get(formControlNames.date).touched"
          >
            {{ 'demographic.validation.date_required' | translate }}
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="!userForm.get(formControlNames.month).valid && userForm.get(formControlNames.month).touched"
          >
            {{ 'demographic.validation.month_required' | translate }}
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="!userForm.get(formControlNames.year).valid && userForm.get(formControlNames.year).touched"
          >
            {{ 'demographic.validation.year_required' | translate }}
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="
              (userForm.get(formControlNames.dateOfBirth).touched &&
                userForm.get(formControlNames.dateOfBirth).hasError('incorrect')) ||
              (userForm.get(formControlNames.age).touched && !userForm.get(formControlNames.age).valid)
            "
          >
            {{ 'demographic.validation.DOB_validation' | translate }}
          </div>

          <div class="user__genderAndForeigner">
            <span class="user__genderAndForeigner--text">{{ 'demographic.text_gender' | translate }}</span>
            <mat-button-toggle-group
              [formControlName]="formControlNames.gender"
              (change)="onEntityChange([primaryGender, secondaryGender], $event)"
              appearance="legacy"
              name="fontStyle"
              aria-label="Font Style"
            >
              <mat-button-toggle *ngFor="let gender of primaryGender" [value]="gender.code">{{
                gender.genderName
              }}</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div
            class="mat-error ng-star-inserted user__gender__error"
            *ngIf="userForm.get(formControlNames.gender).touched && userForm.get(formControlNames.gender).invalid"
          >
            {{ 'demographic.validation.gender_validation' | translate }}
          </div>

          <div class="user__genderAndForeigner">
            <span class="user__genderAndForeigner--text">{{ 'demographic.text_residence_status' | translate }}</span>
            <mat-button-toggle-group
              [formControlName]="formControlNames.residenceStatus"
              (change)="onEntityChange([primaryResidenceStatus, secondaryResidenceStatus], $event)"
              appearance="legacy"
              name="fontStyle"
              aria-label="Font Style"
            >
              <mat-button-toggle value="national"> {{ 'demographic.button_national' | translate }} </mat-button-toggle>
              <mat-button-toggle value="foreigner">
                {{ 'demographic.button_foreigner' | translate }}
              </mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div
            class="mat-error ng-star-inserted user__gender__error"
            *ngIf="
              userForm.get(formControlNames.residenceStatus).touched &&
              userForm.get(formControlNames.residenceStatus).invalid
            "
          >
          {{ 'demographic.nationality_validation' | translate }}
           
          </div>

          <mat-form-field>
            <input
              matInput
              [matKeyboard]="keyboardLang"
              #addressLine1
              maxlength="50"
              placeholder="{{ 'demographic.label_address1' | translate }}"
              [formControlName]="formControlNames.addressLine1"
              (focusout)="onTransliteration(addressLine1, formControlNames.addressLine1Secondary)"
              (change)="onTransliteration(addressLine1, formControlNames.addressLine1Secondary)"
            />
            <mat-hint align="end">{{ addressLine1.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!addressLine1.invalid">{{
              'demographic.validation.address_required' | translate
            }}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              #addressLine2
              [matKeyboard]="keyboardLang"
              maxlength="50"
              placeholder="{{ 'demographic.label_address2' | translate }}"
              [formControlName]="formControlNames.addressLine2"
              (focusout)="onTransliteration(addressLine2, formControlNames.addressLine2Secondary)"
              (change)="onTransliteration(addressLine2, formControlNames.addressLine2Secondary)"
            />
            <mat-hint align="end">{{ addressLine2.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!addressLine2.invalid">{{
              'demographic.validation.address_required' | translate
            }}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input
              matInput
              #addressLine3
              [matKeyboard]="keyboardLang"
              maxlength="50"
              placeholder="{{ 'demographic.label_address3' | translate }}"
              [formControlName]="formControlNames.addressLine3"
              (focusout)="onTransliteration(addressLine3, formControlNames.addressLine3Secondary)"
              (change)="onTransliteration(addressLine3, formControlNames.addressLine3Secondary)"
            />
            <mat-hint align="end">{{ addressLine3.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!addressLine3.invalid">{{
              'demographic.validation.address_required' | translate
            }}</mat-error>
          </mat-form-field>

          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                (selectionChange)="onLocationSelect($event, provinces, regions)"
                placeholder="{{ 'demographic.label_region' | translate }}"
                [formControlName]="formControlNames.region"
                #region
              >
                <mat-option *ngFor="let region of regions1" [value]="region.valueCode">{{
                  region.valueName
                }}</mat-option>
              </mat-select>
              <mat-error *ngIf="!region.invalid">{{ 'demographic.validation.region_required' | translate }}</mat-error>
            </mat-form-field>
          </div>

          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                (selectionChange)="onLocationSelect($event, cities, provinces)"
                placeholder="{{ 'demographic.label_province' | translate }}"
                [formControlName]="formControlNames.province"
                #province
              >
                <mat-option *ngFor="let province of provinces1" [value]="province.valueCode">{{
                  province.valueName
                }}</mat-option>
              </mat-select>
              <mat-error *ngIf="!province.invalid">{{
                'demographic.validation.province_required' | translate
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                (selectionChange)="onLocationSelect($event, localAdministrativeAuthorities, cities)"
                placeholder="{{ 'demographic.label_city' | translate }}"
                [formControlName]="formControlNames.city"
                #city
              >
                <mat-option *ngFor="let city of cities1" [value]="city.valueCode">{{ city.valueName }}</mat-option>
              </mat-select>
              <mat-error *ngIf="!city.invalid">{{ 'demographic.validation.city_required' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                (selectionChange)="onLocationSelect($event, null, localAdministrativeAuthorities)"
                placeholder="{{ 'demographic.label_local_administrative_authority' | translate }}"
                [formControlName]="formControlNames.localAdministrativeAuthority"
                #authority
              >
                <mat-option
                  *ngFor="let localAdministrativeAuthoritie of localAdministrativeAuthorities1"
                  [value]="localAdministrativeAuthoritie.valueCode"
                  >{{ localAdministrativeAuthoritie.valueName }}</mat-option
                >
              </mat-select>
              <mat-error *ngIf="!authority.invalid">{{
                'demographic.validation.admin_required' | translate
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                matInput
                type="text"
                #postalCode
                maxlength="6"
                placeholder="{{ 'demographic.label_postalCode' | translate }}"
                [formControlName]="formControlNames.postalCode"
                #postalCode
              />
              <mat-hint align="end">{{ postalCode.value.length }} / 6</mat-hint>
              <mat-error *ngIf="!postalCode.invalid">{{
                'demographic.validation.postal_code_required' | translate
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                matInput
                #mobileNumber
                type="text"
                maxlength="10"
                placeholder="{{ 'demographic.label_mob_num' | translate }}"
                [formControlName]="formControlNames.phone"
              />
              <mat-hint align="end">{{ mobileNumber.value.length }} / 10</mat-hint>
              <mat-error *ngIf="!mobileNumber.invalid">{{
                'demographic.validation.mobile_required' | translate
              }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                #email
                maxlength="50"
                matInput
                placeholder="{{ 'demographic.label_email_id' | translate }}"
                [formControlName]="formControlNames.email"
              />
              <mat-hint align="end">{{ email.value.length }} / 50</mat-hint>
              <mat-error *ngIf="!email.invalid">{{ 'demographic.validation.email_required' | translate }}</mat-error>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                #pin
                maxlength="30"
                matInput
                type="text"
                placeholder="{{ 'demographic.label_pin' | translate }}"
                [formControlName]="formControlNames.CNIENumber"
              />
              <mat-hint align="end">{{ pin.value.length }} / 30</mat-hint>
              <mat-error *ngIf="!pin.invalid">{{ 'demographic.validation.pin_required' | translate }}</mat-error>
            </mat-form-field>
          </div>
        </form>
      </div>
      <div [dir]="secTextDir" class="user__container">
        <form [formGroup]="transUserForm" class="user__form">
          <h4>{{ secondaryLanguagelabels.language }}</h4>
          <mat-form-field>
            <input
              matInput
              [matKeyboard]="keyboardSecondaryLang"
              maxlength="50"
              [placeholder]="secondaryLanguagelabels.label_name"
              [formControlName]="formControlNames.fullNameSecondary"
              name="t_fullName"
              #t_fullName
            />
            <mat-hint align="end">{{ t_fullName.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!t_fullName.invalid">{{ secondaryLanguagelabels.validation.name_required }}</mat-error>
          </mat-form-field>

          <div class="user__age-or-date">
            <div class="user__date">
              <mat-form-field>
                <input
                  readonly
                  [value]="userForm.get(formControlNames.date).value"
                  matInput
                  [placeholder]="secondaryLanguagelabels.date_dd"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  readonly
                  [value]="userForm.get(formControlNames.month).value"
                  matInput
                  [placeholder]="secondaryLanguagelabels.date_mm"
                />
              </mat-form-field>
              <mat-form-field>
                <input
                  readonly
                  [value]="userForm.get(formControlNames.year).value"
                  matInput
                  [placeholder]="secondaryLanguagelabels.date_yyyy"
                />
              </mat-form-field>
            </div>

            <div class="user__pref"><mat-slide-toggle [disabled]="true" [checked]="isReadOnly"></mat-slide-toggle></div>
            <div class="user__age">
              <mat-form-field>
                <input
                  readonly
                  [value]="userForm.get(formControlNames.age).value"
                  matInput
                  [placeholder]="secondaryLanguagelabels.label_age"
                />
              </mat-form-field>
              <span class="user__age--disabled">{{ secondaryLanguagelabels.text_years }}</span>
            </div>
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="!userForm.get(formControlNames.date).valid && userForm.get(formControlNames.date).touched"
          >
            <br />
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="!userForm.get(formControlNames.month).valid && userForm.get(formControlNames.month).touched"
          >
            <br />
          </div>
          <div *ngIf="!userForm.get(formControlNames.year).valid && userForm.get(formControlNames.year).touched">
            <br />
          </div>
          <div
            class="mat-error ng-star-inserted user__dob__error"
            *ngIf="
              userForm.get(formControlNames.dateOfBirth).touched &&
              userForm.get(formControlNames.dateOfBirth).hasError('incorrect')
            "
          >
            <br />
          </div>
          <div class="user__genderAndForeigner">
            <span class="user__genderAndForeigner--text">{{ secondaryLanguagelabels.text_gender }}</span>
            <mat-button-toggle-group
              appearance="legacy"
              [disabled]="true"
              aria-label="Font Style"
              [value]="userForm.get(formControlNames.gender).value"
            >
              <mat-button-toggle *ngFor="let gender of secondaryGender" [value]="gender.code">{{
                gender.genderName
              }}</mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div
            class="mat-error ng-star-inserted user__gender__error"
            *ngIf="userForm.get(formControlNames.gender).touched && userForm.get(formControlNames.gender).invalid"
          >
            <br />
          </div>

          <div class="user__genderAndForeigner">
            <span class="user__genderAndForeigner--text">{{ secondaryLanguagelabels.text_residence_status }}</span>
            <mat-button-toggle-group
              [disabled]="true"
              [value]="userForm.get(formControlNames.residenceStatus).value"
              appearance="legacy"
              name="fontStyle"
              aria-label="Font Style"
            >
              <mat-button-toggle value="national"> {{ secondaryLanguagelabels.button_national }} </mat-button-toggle>
              <mat-button-toggle value="foreigner"> {{ secondaryLanguagelabels.button_foreigner }} </mat-button-toggle>
            </mat-button-toggle-group>
          </div>
          <div
            class="mat-error ng-star-inserted user__gender__error"
            *ngIf="
              userForm.get(formControlNames.residenceStatus).touched &&
              userForm.get(formControlNames.residenceStatus).invalid
            "
          >
            <br />
          </div>

          <mat-form-field>
            <input
              matInput
              [matKeyboard]="keyboardSecondaryLang"
              #t_addressLine1
              name="t_addressLine1"
              maxlength="50"
              [placeholder]="secondaryLanguagelabels.label_address1"
              [formControlName]="formControlNames.addressLine1Secondary"
            />
            <mat-hint align="end">{{ t_addressLine1.value.length }} / 50</mat-hint>
            <mat-error *ngIf="!addressLine1.invalid">{{
              secondaryLanguagelabels.validation.address_required
            }}</mat-error>
          </mat-form-field>
          <mat-form-field>
            <input
              [formControlName]="formControlNames.addressLine2Secondary"
              matInput
              [matKeyboard]="keyboardSecondaryLang"
              #t_addressLine2
              name="t_addressLine2"
              maxlength="50"
              [placeholder]="secondaryLanguagelabels.label_address2"
            />
            <mat-error *ngIf="!addressLine1.invalid">{{
              secondaryLanguagelabels.validation.address_required
            }}</mat-error>
            <mat-hint align="end">{{ t_addressLine2.value.length }} / 50</mat-hint>
          </mat-form-field>
          <mat-form-field>
            <input
              [formControlName]="formControlNames.addressLine3Secondary"
              name="t_addressLine3"
              matInput
              [matKeyboard]="keyboardSecondaryLang"
              #t_addressLine3
              maxlength="50"
              [placeholder]="secondaryLanguagelabels.label_address3"
            />
            <mat-error *ngIf="!addressLine1.invalid">{{
              secondaryLanguagelabels.validation.address_required
            }}</mat-error>
            <mat-hint align="end">{{ t_addressLine3.value.length }} / 50</mat-hint>
          </mat-form-field>

          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                name="t_region"
                [value]="userForm.get(formControlNames.region).value"
                [disabled]="true"
                [placeholder]="secondaryLanguagelabels.label_region"
              >
                <mat-option *ngFor="let region of regions2" [value]="region.valueCode">{{
                  region.valueName
                }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                [disabled]="true"
                [placeholder]="secondaryLanguagelabels.label_province"
                [value]="userForm.get(formControlNames.province).value"
                name="t_province"
              >
                <mat-option *ngFor="let province of provinces2" [value]="province.valueCode">{{
                  province.valueName
                }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                [disabled]="true"
                [placeholder]="secondaryLanguagelabels.label_city"
                [value]="userForm.get(formControlNames.city).value"
                name="t_city"
              >
                <mat-option *ngFor="let city of cities2" [value]="city.valueCode">{{ city.valueName }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <mat-select
                [disabled]="true"
                [placeholder]="secondaryLanguagelabels.label_local_administrative_authority"
                [value]="userForm.get(formControlNames.localAdministrativeAuthority).value"
                name="t_localAdministrativeAuthority"
              >
                <mat-option *ngFor="let LAA of localAdministrativeAuthorities2" [value]="LAA.valueCode">{{
                  LAA.valueName
                }}</mat-option>
              </mat-select>
            </mat-form-field>
          </div>

          <div class="user__dropdown">
            <mat-form-field>
              <input
                readonly
                matInput
                [value]="userForm.get(formControlNames.postalCode).value"
                type="text"
                [placeholder]="secondaryLanguagelabels.label_postalCode"
              />
            </mat-form-field>
          </div>

          <div class="user__dropdown">
            <mat-form-field>
              <input
                readonly
                matInput
                type="text"
                [placeholder]="secondaryLanguagelabels.label_mob_num"
                [value]="userForm.get(formControlNames.phone).value"
              />
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                matInput
                readonly
                [placeholder]="secondaryLanguagelabels.label_email_id"
                [value]="userForm.get(formControlNames.email).value"
              />
            </mat-form-field>
          </div>
          <div class="user__dropdown">
            <mat-form-field>
              <input
                readonly
                matInput
                type="text"
                [placeholder]="secondaryLanguagelabels.label_pin"
                [value]="userForm.get(formControlNames.CNIENumber).value"
              />
            </mat-form-field>
          </div>
        </form>
      </div>
    </div>
  </div>
  <div class="user__buttons">
    <button class="user__btn" type="button" (click)="onBack()" [disabled]="isNewApplicant || this.message['modifyUserFromPreview'] === 'true'">
      {{ 'demographic.action_back' | translate }}
    </button>
    <button
      *ngIf="!showPreviewButton"
      class="user__btn"
      type="button"
      [disabled]="!dataUploadComplete"
      (click)="onSubmit()"
    >
      {{ 'demographic.action_continue' | translate }}
    </button>
    <button
      *ngIf="showPreviewButton"
      class="user__btn"
      type="button"
      [disabled]="!dataUploadComplete"
      (click)="onSubmit()"
    >
      {{ 'demographic.action_preview' | translate }}
    </button>
  </div>
</div>
